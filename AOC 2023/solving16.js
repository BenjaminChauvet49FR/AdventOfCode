const rawData = [
"Z...Z............................../...Z....-..../...|....../.......-...........................|.............",
".............|/.../............................-....|......../...........|.|................/Z-..|....Z...../.",
"....Z......-.....||-Z........................|/........|............/.......................|Z...|............",
"|.....-....Z.|......-.Z....Z-......|.........../|......../Z...Z.-..........-.........Z...-..Z........./.......",
"............../.|..........|.......|.......Z.Z...............|../......................Z......................",
".-.-...|....-.-.......Z...Z..../....../.......-..................Z......./....................-........-......",
"..........Z.....|.....Z.....Z..................................................................|..............",
"...../..................../...........-..-.........................-...................................../-...",
"......Z......Z.............|..../..........Z.........................Z..Z../....../...........-...........-...",
".....|./..........-....Z....|........./..........-..............-./........../..............-...Z...../.......",
"...../...../.......-..............|......ZZ../......../........../............../......Z......Z...../........-",
"..Z................|......Z.............Z|............./..../...-...........................|-../|...|......./",
"....|.........-.|....-....-.....|.......................................-...../.Z.............Z.........-.....",
".........-........././................Z../...........Z.......Z......./.....Z................Z...Z.............",
".............|........Z....|........Z........................././Z............-............./............/....",
"................./...-..........|..............--../.|Z............./.........................................",
".|../.....|................|........../.......-.......-.............Z.........................................",
".............Z..................Z......../.......Z/................Z....Z......../...././....................|",
".................Z................................../..........................................|..............",
"................|..................../..................Z...........................|./..........-.........-..",
"...|.............Z.....-..||...-......../.........................../......................-..-|.........-....",
".Z...........................-../................|.../............/....-......Z............................../",
".........................|...............|...........|.|.............Z....Z...../........-.--/................",
"./...|.........-.............|..-../..........Z........./../...........................|.....................Z",
".|.....-......Z..-..................Z..|.../................................/Z......-.........../...../..../..",
"...Z...............Z....Z../.........|Z................-......................................Z...............",
"....../..-|...................................Z.........|...-....|..../.......................|/..............",
".........|.|..............-...................../.................|./-....|../..........Z..............|......",
".......Z..|...Z...........|....................|.-......................Z..-.../.......Z|..........Z.../.|.Z.|",
"-.............................|....................|.....|.........-.........|..-........./.......|Z.|.../....",
".-.......Z...................Z.....Z../......|..............|...................-............./.....-.........",
"...|..................../..|Z....Z..-............Z................Z..................................|....-...",
"...............Z....................Z.|Z....-.............|....../.................Z..........Z....../.....Z..",
"......|..Z......................-........Z.......Z.../.|......-...............|......./Z../........../........",
".........-..../........-Z.........-.......-.....|.|....Z.Z........Z.-.......|.........-....|...--.-..|........",
".....|..|.|....-./.....|.....|...........|/Z...../.............Z/....|-........./..-.................../......",
".|....../..............-...-............-.......-....................Z..-...-.|...............................",
"|.............|............................|.............................-....................................",
"....../....-../..........Z...|......-.|...........Z..|..................-...../../-..Z.........Z.....|........",
"......Z../..................-..............-.../.......-.............................Z..-....Z/...............",
"............Z......................./..................|....-....................-........../.....-.......-...",
"...............|...........-./.......Z...-..../....|....-........./..-.........-...........-.Z................",
"/..................../.................Z.....-................./Z/........../............./..|................",
"....................../.............../Z..........|.....Z|../...-..Z............|........./...................",
"......................-../.|...............................................-......./..Z......|................",
".......Z...............|..............|.../............................Z........./....|.....|................|",
"....Z......../....-...|.................-..........-...|/./...................../.Z...........................",
".........|......./.............|../..-.......................-|...........Z.........|...|.....................",
"..Z............../.......................-....Z.................-.....|.........-.............................",
".....-/...............|......|..../......-...|..../...........-................................-.....Z...Z...Z",
"......................../.......Z................./..Z..........Z............|...................Z............",
"-....................../...........Z......./...|...........Z|./........-..................Z...-......../......",
".......|./..........|...Z................/..............|.Z.............Z.Z..................................Z",
".|............Z.......Z..........Z./..........-...................../..|............................../.......",
"........................../....../...|......-..Z..............|-.|....Z-...|../.........Z......-.Z./..........",
"....../.........../.........../..Z......./......../-...Z...........Z............/.....................|...Z...",
"...-....../.../.....Z....-...........Z..................../.........-......................Z..................",
"/............|../.......................-.........|....../......|.......|............/-..../..../............|",
"../..|...............|../-................/.........................................|.........................",
".....-..........-Z-...........|....../Z....................|......................-.....-..........Z..........",
".-.....Z......./.....Z............../...|...|............-...|...../.............Z...Z../|...../...|......../.",
".../......-..|...................Z-...../..-..|.......|..-..../........|....-.../.......|........|......|.....",
".-....../............/........-/..........Z........Z...........................Z..........................|...",
".....|...|........................................../...........................-|.......|..-.................",
"|...........|.Z..............|......................-|./.......|../....Z-.|Z.../...-.......|.......|..........",
".|.........Z.|../.....-.........Z......Z..Z...........|...................Z.........../......|.......-..../...",
"...............|.....................|......|.................../.............|.....-..|..........-...........",
"|.............|...........|............../......................Z..........-.............|.....-..............",
".Z............-../Z.................-.......|.-............../........Z.......|.............Z.....Z...........",
".../.Z.....Z|..-.............Z.....................................|.................-............/..........|",
".../../.............................-...|.......|..............-............................-.................",
"......................Z-Z............-......|.-............|.Z...............-.../......Z.........-...........",
"............................|..Z.-.............../.Z.../.......-..................Z...........................",
"..../..Z........-........Z......../..Z......../......Z./..-|....|........Z............|...................|Z..",
"..................................................|...Z..../........................................-.........",
"...Z......-............Z.......-...Z...Z............|Z..../Z....../.||........................................",
"...............-................-......-....../.../............................-.|....|................./..Z..",
"......././../....-...................................................Z..............................||........",
"|/.....Z........./....................Z......-.-.....|......|................../............................Z.",
"................./..Z...................Z......Z.........Z..............-.....-....................Z..-..../.Z",
"...Z......|..-.........-.....|.........-........|.............|..............Z............-...................",
".Z..........|.............-............../../......../........................................................",
"....Z....................................................-......../..-........|.....Z..........Z..............",
".......-..Z....................-..|.....-..../.-......../............Z.............|..............|../........",
"...|/....-.............-......../Z...........|................/..................Z.....|....................-.",
".....-................./.|......../..........-......|...Z.....-..............-...-..|.......................|.",
".........Z..../...........-........|--......-.........-.........Z...-.......|.Z........-.........|.........../",
"........-...|../......../........Z.....|.....|.....Z................/.......-.....-.........../..|........Z...",
".-....Z................||.......|...Z..Z......./.....-............|../...............|........./......-...-...",
".......Z......Z............../.|.......................................|.......................|........./|...",
"............|../........-............................/.........-.........-..Z..Z..../.../.Z...Z.Z.............",
"....................Z...|.....Z/...|Z.|.................Z.|...............................................Z-..",
".................Z|...-........./Z.......|.......................................-.........Z..................",
".......-.......|.............Z....|...Z.....-.Z./.....-..................ZZ........-..Z......-....../.........",
"............-...../....................|...-....../..............-..../................|...........-..........",
"............../Z..........|........|./ZZ..|.....|../....-......../..............-............Z......./...Z....",
"............./....../......-...............Z|..Z............../......Z.......................-.......|..-.....",
".....-........./....Z......................Z...../...|./..Z.../Z...../.......Z...............Z............../.",
"...................................|..../../.-....................-.....-.......-...................-....-....",
"..................................................-......|-............|-...Z.Z...............Z...............",
".............../...........Z................/.....Z...........-.....|......................-............-.....",
".............|.....|......................./.......|.............................Z.|..........Z../........Z...",
"........................|..............Z............................/...................-..|.......Z.Z........",
".......|....../............/...............-..........|Z.........|.......Z.....|.............Z/../...-...-....",
"......Z.Z.....-..||...-.Z........Z....|...../Z/....Z........../........|......|...............................",
"..Z........-../....Z/.....................-...........................|.......................................",
"..............|../.|...............Z...Z.........|..Z............../......./.-.....Z......-..../..............",
"....|....-............../......-.Z........-............|.|..|.........................../.......|.............",
"........Z............./...................|......../....|..-.....................|./.......Z..................",
"............./.|...........Z.............................../.....Z....|/.......|.|........./.........|........"
];

var gHorizontalBeams, gVerticalBeams, gXL, gYL;

function conclusion_16_1() {
	return conclusion_16_aux(0, 0, DIRECTION.RIGHT);
}

function conclusion_16_2() {
	var answer = 0;
	for (var x = 0 ; x < rawData[0].length ; x++) {		
		answer = Math.max(conclusion_16_aux(x, 0, DIRECTION.DOWN), answer);
		answer = Math.max(conclusion_16_aux(x, gYL-1, DIRECTION.UP), answer);
	}
	for (var y = 0 ; y < rawData.length ; y++) {		
		answer = Math.max(conclusion_16_aux(0, y, DIRECTION.RIGHT), answer);
		answer = Math.max(conclusion_16_aux(gXL-1, y, DIRECTION.LEFT), answer);
	}
	return answer;
}

function conclusion_16_aux(p_x, p_y, p_directionGoingTo) {
	gXL = rawData[0].length;
	gYL = rawData.length;
	gHorizontalBeams = generateDoubleEntryArray(gXL, gYL, false);
	gVerticalBeams = generateDoubleEntryArray(gXL, gYL, false);
	if (p_directionGoingTo == DIRECTION.LEFT || p_directionGoingTo == DIRECTION.RIGHT) {		
		handleHorizontalBeam(p_x, p_y, p_directionGoingTo == DIRECTION.RIGHT);
	}
	if (p_directionGoingTo == DIRECTION.UP || p_directionGoingTo == DIRECTION.DOWN) {		
		handleVerticalBeam(p_x, p_y, p_directionGoingTo == DIRECTION.DOWN);
	}	
	// Victory lap
	var answer = 0;
	for (var y = 0 ; y < gYL ; y++) {
		for (var x = 0 ; x < gXL ; x++) {
			if (gHorizontalBeams[y][x] || gVerticalBeams[y][x]) {
				answer++;
			}
		}
	}
	return answer;	
}


// When a horizontal beam comes into this space
function handleHorizontalBeam(p_x, p_y, p_leftToRight) {
	if (p_x == -1 || p_x == gXL) {
		return;
	}
	const tile = rawData[p_y].charAt(p_x);
	if (tile == '/') {
		gHorizontalBeams[p_y][p_x] = true;
		handleVerticalBeam(p_x, p_y+(p_leftToRight ? -1 : 1), !p_leftToRight);
	} else if (tile == 'Z') {
		gHorizontalBeams[p_y][p_x] = true;
		handleVerticalBeam(p_x, p_y+(p_leftToRight ? 1 : -1), p_leftToRight);		
	} else if (gHorizontalBeams[p_y][p_x]) {
		return;
	} else if (tile == '|') {
		gHorizontalBeams[p_y][p_x] = true;
		handleVerticalBeam(p_x, p_y-1, false);
		handleVerticalBeam(p_x, p_y+1, true);
	} else {
		gHorizontalBeams[p_y][p_x] = true;
		handleHorizontalBeam(p_x+(p_leftToRight ? 1 : -1), p_y, p_leftToRight);
	}
}

// When a vertical beam comes into this space
function handleVerticalBeam(p_x, p_y, p_upToDown) {
	if (p_y == -1 || p_y == gYL) {
		return;
	}
	const tile = rawData[p_y].charAt(p_x);
	if (tile == '/') {
		gVerticalBeams[p_y][p_x] = true;
		handleHorizontalBeam(p_x+(p_upToDown ? -1 : 1), p_y, !p_upToDown);
	} else if (tile == 'Z') {
		gVerticalBeams[p_y][p_x] = true;
		handleHorizontalBeam(p_x+(p_upToDown ? 1 : -1), p_y, p_upToDown);
	} else if (gVerticalBeams[p_y][p_x]) {
		return;
	} else if (tile == '-') {
		gVerticalBeams[p_y][p_x] = true;
		handleHorizontalBeam(p_x-1, p_y, false);
		handleHorizontalBeam(p_x+1, p_y, true);
	} else {
		gVerticalBeams[p_y][p_x] = true;
		handleVerticalBeam(p_x, p_y + (p_upToDown ? 1 : -1), p_upToDown);
	}
}